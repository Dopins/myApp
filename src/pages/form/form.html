<!--
  Generated template for the FormPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{title}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <ion-list *ngIf="showSection">
    <ion-item>
      <ion-label>名称</ion-label>
      <ion-input type="text" [(ngModel)]="sectionInfo.name"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>介绍</ion-label>
      <ion-textarea [(ngModel)]="sectionInfo.introduction"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>序号</ion-label>
      <ion-input type="number" [(ngModel)]="sectionInfo.orderId"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>开始时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="sectionInfo.startDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>结束时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="sectionInfo.endDate" ></ion-datetime>
    </ion-item>

    <ion-item>
      <button ion-button (click)="saveSection()" block>保存</button>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="showCourse">
    <ion-item>
      <ion-label>课程名称</ion-label>
      <ion-input type="text" [(ngModel)]="courseInfo.name" required></ion-input>
    </ion-item>
    <ion-item [ngStyle]="{'display':'none'}">
      <input #imageUpload  type="file" (change)="imageUploaded($event)" >
    </ion-item>
    <ion-item-sliding>
      <ion-item (click)="imageUpload.click()">
        <ion-label>课程图片</ion-label>
        <ion-input type="text" placeholder="点击上传图片" [(ngModel)]="courseInfo.filename" disabled></ion-input>
      </ion-item>
      <ion-item-options>
        <button ion-button (click)="imageRemoved()">
          清除
        </button>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item *ngIf="showImg">
        <img src="{{imgSrc}}" alt="课程背景">
    </ion-item>
    <ion-item>
      <ion-label>课程教材</ion-label>
      <ion-input type="text" [(ngModel)]="courseInfo.textbook"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>课程类别</ion-label>
      <ion-select [(ngModel)]="courseInfo.type" cancelText="取消" okText="确定">
        <ion-option  *ngFor="let type of courseType" value="{{type.code}}">{{type.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>认证学分</ion-label>
      <ion-input type="number" [(ngModel)]="courseInfo.credit" min="0.5" step="0.5"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>总学时</ion-label>
      <ion-input type="number" [(ngModel)]="courseInfo.classHour" min="1"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>开课单位</ion-label>
      <ion-select [(ngModel)]="courseInfo.department" cancelText="取消" okText="确定">
        <ion-option *ngFor="let unit of department" value="{{unit.code}}">{{unit.name}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>介绍</ion-label>
      <ion-textarea [(ngModel)]="courseInfo.introduction" required></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>是否设为公开课</ion-label>
      <ion-checkbox [(ngModel)]="this.isOpen"></ion-checkbox>
    </ion-item>
    <ion-item>
      <ion-label>开始时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="courseInfo.startDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>结束时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="courseInfo.endDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <button ion-button (click)="saveCourse()" block>保存</button>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="showHomework">
    <ion-item>
      <ion-label>作业名称</ion-label>
      <ion-input type="text" [(ngModel)]="homeworkInfo.name"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>开始时间</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DDTHH:mm" [(ngModel)]="homeworkInfo.startDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>结束时间</ion-label>
      <ion-datetime displayFormat="YYYY-MM-DDTHH:mm" [(ngModel)]="homeworkInfo.endDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>作业说明</ion-label>
      <ion-textarea [(ngModel)]="homeworkInfo.introduction"></ion-textarea>
    </ion-item>
    <ion-item [ngStyle]="{'display':'none'}">
      <input type="file" #uploadHomework (change)="homeworkUpload($event)"/>
    </ion-item>
    <button ion-item (click)="uploadHomework.click()">
      <ion-label>附件</ion-label>
      <ion-input type="text" placeholder="点击上传文件" [(ngModel)]="homeworkInfo.chFilename" disabled></ion-input>
    </button>
    <ion-item [ngStyle]="{'display':'none'}">
      <input type="file" #uploadAnswer (change)="answerUpload($event)" />
    </ion-item>
    <button ion-item (click)="uploadAnswer.click()">
      <ion-label>答案</ion-label>
      <ion-input type="text" placeholder="点击上传文件" [(ngModel)]="homeworkInfo.answerName" disabled></ion-input>
    </button>
    <ion-item>
      <button ion-button (click)="saveHomework()" block>保存</button>
    </ion-item>
  </ion-list>

  <ion-list *ngIf="showUnit">
    <ion-item>
      <ion-label>资料名称</ion-label>
      <ion-input type="text" [(ngModel)]="unit.name"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>显示排序</ion-label>
      <ion-input type="number" [(ngModel)]="unit.orderId"></ion-input>
    </ion-item>
    <ion-item [ngStyle]="{'display':'none'}">
      <input type="file" #uploadPdf (change)="pdfUpload($event)" />
    </ion-item>
    <ion-item-sliding >
      <ion-item (click)="uploadPdf.click()">
        <ion-label>资料PDF</ion-label>
        <ion-input type="text" placeholder="点击上传pdf" [(ngModel)]="unit.syllabusFile" disabled></ion-input>
      </ion-item>
      <ion-item-options>
        <button ion-button (click)="deleteSyllabus()">
          清除
        </button>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item [ngStyle]="{'display':'none'}">
      <input type="file" #uploadVideo (change)="videoUpload($event)"  />
    </ion-item>
    <ion-item-sliding>
      <ion-item (click)="uploadVideo.click()">
        <ion-label>资料视频</ion-label>
        <ion-input type="text" placeholder="点击上传视频" [(ngModel)]="unit.slidesFile" disabled></ion-input>
      </ion-item>
      <ion-item-options>
        <button ion-button (click)="deleteSlides()">
          清除
        </button>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item [ngStyle]="{'display':'none'}">
      <input type="file" #uploadFile (change)="fileUpload($event)" />
    </ion-item>
    <ion-item-sliding >
      <ion-item (click)="uploadFile.click()">
        <ion-label>辅导材料</ion-label>
        <ion-input type="text" placeholder="点击上传文件" [(ngModel)]="unit.referenceFile" disabled></ion-input>
      </ion-item>
      <ion-item-options>
        <button ion-button (click)="deleteReference()">
          清除
        </button>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item>
      <ion-label>开始时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="unit.startDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>结束时间</ion-label>
      <ion-datetime displayFormat="MMM DD YYYY" [(ngModel)]="unit.endDate" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>资料说明</ion-label>
      <ion-textarea [(ngModel)]="unit.introduction"></ion-textarea>
    </ion-item>
    <ion-item>
      <button ion-button (click)="saveUnit()" block>保存</button>
    </ion-item>
  </ion-list>

</ion-content>
